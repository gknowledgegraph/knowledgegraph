$(function(){function handle(e){var e=unique(e),a=[];for(var t in e){e[t].key=e[t].name.split("知识库")[0].toLowerCase().replace(/\s/g,"");var n=e[t].key;if(/.*[\u4e00-\u9fa5]+.*$/.test(e[t].key)){var r=trans.slugify(n,{separator:""});a.push({key:r,word:e[t].word,url:e[t].url,logo:e[t].logo,name:e[t].name,subCount:e[t].subCount,conCount:e[t].conCount})}}return e.concat(a)}function unique(e){if(e.length>0){for(var a=[e[0]],t=1;t<e.length;t++){for(var n=!1,r=0;r<a.length;r++)if(e[t].name==a[r].name){n=!0;break}n||a.push(e[t])}return a}return[]}var trans=TR,data,oReplace={replace:function(){$.ajax({type:"get",url:"http://internalapi.csdn.net/knowledge/public/public/api/words?x-acl-token=9DeJLGuYSy/6nSmDQen5amEWUh0K",async:!1,dataType:"jsonp",jsonp:"callback",success:function(resobj){if("ok"==resobj.msg){var resData=resobj.data,storage=window.localStorage;resData.length>0&&storage.setItem("realData",JSON.stringify(resData)),data=handle(eval(resData)),data.length>0&&(wsCache.isSupported()&&wsCache.set("realData",resData,{exp:86400}),oReplace.complete())}},error:function(){console.log("Send Ajax error ...")}})},complete:function(){$("#search-form").autocomplete({hints:data,width:300,height:30,onSubmit:function(e){}})}};if($("#base_id").val().length>0)data=[],oReplace.complete();else{var wsCache=new WebStorageCache;if(wsCache.deleteAllExpires(),data=localStorage.getItem("realData"),(data=JSON.parse(data))&&0!=data.length){if(data=handle(data.v),!data.length)return!1;oReplace.complete()}else oReplace.replace()}});